<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>Timinute</title>
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/Attendance Management.css" />
</head>

<body>

<header class="header">
    <div class="logo-container">
      <img src="../image/Timinute_logo.png" alt="画像" />
    </div>
    <div class="welcome-text">
      <p>お疲れ様です！<br />管理者さん</p>
    </div>
    <div class="buttons">
      <a href="userhome.html"><button class="headerbtn">HOME</button></a>
      <a href="login.html"><button class="headerbtn">Logout</button></a>
    </div>
</header>

<div class="whole">
  <main>
    <div class="search-box">
      <form>
        <div class="searchcontent">
          <label>
            <span class="label-text">部署</span>
            <select id="department">
              <option value="">選択してください</option>
              <option value="sales">営業</option>
              <option value="dev">開発</option>
              <option value="hr">総務</option>
            </select>
          </label>
        </div>

        <div class="searchcontent">
          <label>
            <span class="label-text">役職</span>
            <select id="position">
              <option value="">選択してください</option>
              <option value="President">社長</option>
              <option value="Director">部長</option>
              <option value="Manager">課長</option>
              <option value="Supervisor">係長</option>
              <option value="Staff">一般</option>
            </select>
          </label>
        </div>

        <div class="searchcontent">
          <label>
            <span class="label-text">社員ID</span>
            <input type="text" id="employee-id" />
          </label>
        </div>

        <div class="searchcontent">
          <label>
            <span class="label-text">期間</span>
            <input type="date" id="start-date" /> 〜 <input type="date" id="end-date" />
          </label>
        </div>
      </form>
<button type="button" class="search-btn" id="search-btn">検索</button>
    </div>

    <div class="explanation">
      <p><b>検索説明</b></p>
      <ul class="textcontent">
        <li>各項目を設定　：指定されたデータを表示</li>
        <li>期間未入力　　：前1カ月のデータが表示</li>
        <li>全項目が未入力：前1カ月の全社員のデータが表示</li>
      </ul>
    </div>
  </main>

   <!-- 検索結果表示。最初は非表示 -->
<div id="results" style="display:none;">
  <h2>検索結果</h2>
  <table id="results-table">
  <thead>
    <tr>
      <th>日付</th>
      <th>始業時間</th>
      <th>終業時間</th>
      <th>労働時間</th>
      <th>休憩時間</th>
      <th>コメント</th>
      <th>編集</th>
      <th>確定</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>2025-07-01</td>
      <td>09:00</td>
      <td>18:00</td>
      <td>8:00</td>
      <td>1:00</td>
      <td>通常勤務</td>
      <td><button class="edit-btn small-btn">編集</button></td>
      <td><button class="confirm-btn small-btn">確定</button></td>
    </tr>
  </tbody>
</table>

<div class="buttons-container">
    <button id="edit-btn" class="small-btn" style="display:none;">編集</button>
    <button id="confirm-btn" class="small-btn" style="display:none;">確定</button>
  </div>

  <button id="output-btn" class="search-btn" style="display:none;">出力</button>
</div>

</div>
</div>



<script>
  document.getElementById("search-btn").addEventListener("click", function () {
    const department = document.getElementById("department").value;
    const position = document.getElementById("position").value;
    const employeeId = document.getElementById("employee-id").value;
    const startDate = document.getElementById("start-date").value;
    const endDate = document.getElementById("end-date").value;

    // ダミーデータ（本来はここでサーバーAPI呼び出し）
    const dummyData = [
      {
        date: "2025-07-01",
        start_time: "09:00",
        closing_time: "18:00",
        worktime: "8:00",
        breaktime: "1:00",
        comment: "通常勤務"
      },
      {
        date: "2025-07-02",
        start_time: "09:15",
        closing_time: "18:15",
        worktime: "8:00",
        breaktime: "1:00",
        comment: "会議多め"
      }
    ];

    // 結果表示部分
    const resultsDiv = document.getElementById("results");
    const tbody = document.querySelector("#results-table tbody");

    // テーブルをリセット
    tbody.innerHTML = "";

    // ダミーデータを結果テーブルに追加
    dummyData.forEach(record => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${record.date}</td>
        <td>${record.start_time}</td>
        <td>${record.closing_time}</td>
        <td>${record.worktime}</td>
        <td>${record.breaktime}</td>
        <td>${record.comment}</td>
        <td><button class="edit-btn small-btn">編集</button></td>
        <td><button class="confirm-btn small-btn">確定</button></td>
      `;
      tbody.appendChild(tr);
    });
      // 編集ボタンに遷移処理を追加
setTimeout(() => {
  document.querySelectorAll('.edit-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const row = btn.closest('tr');
      const date = row.cells[0].textContent;
      const employeeId = document.getElementById("employee-id").value;

      // aa.html にパラメータを付けて遷移
      const url = `aa.html?date=${encodeURIComponent(date)}&id=${encodeURIComponent(employeeId)}`;
      window.location.href = url;
    });
  });
}, 0);
    // 検索結果表示エリアを表示する
    resultsDiv.style.display = "block";
    document.getElementById("output-btn").style.display = "block";
  });
</script>

</body>
</html>
